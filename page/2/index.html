<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>gca的学习录</title><meta name="keywords" content="博客"><meta name="author" content="gca"><meta name="copyright" content="gca"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="gca的学习录，欢迎访问！">
<meta property="og:type" content="website">
<meta property="og:title" content="gca的学习录">
<meta property="og:url" content="https://fireonice.github.io/page/2/index.html">
<meta property="og:site_name" content="gca的学习录">
<meta property="og:description" content="gca的学习录，欢迎访问！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fireonice.github.io/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220209232417.jpg">
<meta property="article:author" content="gca">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fireonice.github.io/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220209232417.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://fireonice.github.io/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'gca的学习录',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-03-06 23:29:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="./css/iconfont.css"><link rel="stylesheet" href="./css/card_botui.css"><link rel="stylesheet" href="./css/index.css"><link rel="stylesheet" href="./css/Lete.css"><link rel="stylesheet" href="./css/var.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="gca的学习录" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220209232417.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/%E5%8A%A8%E6%BC%AB5.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">gca的学习录</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">gca的学习录</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/fireonice" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1637872839@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/fireonice.github.io" target="_blank" title="博客"><i class="fab fa-algolia"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/06/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%932/" title="开发总结——MongoDB、业务流程"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220206221759069.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="开发总结——MongoDB、业务流程"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/06/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%932/" title="开发总结——MongoDB、业务流程">开发总结——MongoDB、业务流程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-06T14:15:39.809Z" title="发表于 2022-02-06 22:15:39">2022-02-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%A7%E5%93%81/">产品</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%BA%A7%E5%93%81%E5%BC%80%E5%8F%91/">产品开发</a></span></div><div class="content">1、架构
2、MongoDB简介基于分布式文件存储的开源数据库系统
字段值可以包含其他文档，数组及文档数组。

特点MongoDB 是一个面向文档存储的数据库
MongoDB记录中设置任何属性的索引 (如：FirstName=”Sameer”,Address=”8 Gandhi Road”)来实现更快的排序
可以通过本地或者网络创建数据镜像，实现高扩展性
如果负载的增加（需要更多的存储空间和更强的处理能力） ，它可以分布在计算机网络中的其他节点上，分片
Mongodb中的Map/reduce主要是用来对数据进行批量处理和聚合操作
场景1、网站数据、大数据、缓存
2、高伸缩性
3、对象、json数据
操作MongoTemplate
MongoRepository（SpringData方法定义规范）
3、预约挂号业务1、排班和挂号详情信息——【医院+科室——规则——日期——排班、挂号信息】
2、确认挂号信息——【就诊人、排班信息】
3、生成预约挂号订单【就诊人 + 排班 —— 生成订单】
4、挂号订单支付（微信）【微信支付、订单状态】
5、取消预约订单【退款、取消订单】

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/05/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/" title="开发总结——前后端分离+微服务"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220205233507058.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="开发总结——前后端分离+微服务"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/05/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/" title="开发总结——前后端分离+微服务">开发总结——前后端分离+微服务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-05T14:14:05.168Z" title="发表于 2022-02-05 22:14:05">2022-02-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%A7%E5%93%81/">产品</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%BA%A7%E5%93%81%E5%BC%80%E5%8F%91/">产品开发</a></span></div><div class="content">1、MP基本流程
主键自动生成
自动填充
乐观锁实现
select、分页
delete：逻辑删除、物理删除
mp性能分析插件
条件查询Querywrapper
2、后端1json时区
swagger测试
统一返回格式
@requestbody
统一、指定、自定义异常处理
日志输出、日志级别
3、前端1es6语法：
数组解构、对象赋值、模拟字符串、对象方法、箭头函数
vue指令、组件
vue生命周期：
Create、Mounted

断点
Vue路由
Axios
Element-ui
Node.js
npm
Babel
前端模块化
Webpack
vue-admin-template、目录结构
跨域
路由切换
开发流程
服务端渲染技术
NUST框架
4、oss、视频点播、短信、微信支付、微信注册阿里云对象存储
阿里云视频点播：上传、播放、删除
阿里云短信服务
微信支付
微信注册
5、后端2nginx
EasyExcel读写
Vue tree
vo
bean转换
树形结构：遍历、循环
路由、隐藏路由、动态路由
富文本编辑器
多表联查——SQL
openfeign、nacos
远程调用流程： ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/28/Mycat/" title="Mycat"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220128200635053.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mycat"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/28/Mycat/" title="Mycat">Mycat</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-28T11:47:51.198Z" title="发表于 2022-01-28 19:47:51">2022-01-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Mycat/">Mycat</a></span></div><div class="content">1、概述数据库中间件① Java与数据库紧耦合。 
② 高访问量高并发对数据库的压力。 
③ 读写请求数据不一致
对比：
作用读写分离：配合主从复制、主备模式
数据分片：分库分表
多数据源整合

原理拦截

三个重要配置文件
1、逻辑库、表、分片节点
2、分片规则
3、用户、系统配置
2、读写分离Myqsl：从接入点开始复制
一主一从日志格式
balance属性：读写分离
复制原理：

双主双从主备切换

3、分库分表分库
分表多表联查
全局表：全局一致性（广播）
常用分片规则：
取模、分片枚举、范围约定、日期
全局序列1、本地文件
2、时间戳
3、数据库方式
4、reids、雪花算法等
4、基于HA机制的Mycat高可用Mycat集群保证数据库高可用
haproxy保证mycat高可用（负载均衡）
Keepalived保证haproxy高可用（创建虚拟ip）

安全权限
user、privileges、sql拦截
6、监控
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/27/RocketMQ/" title="RocketMQ"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220127213633953.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RocketMQ"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/27/RocketMQ/" title="RocketMQ">RocketMQ</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-27T10:43:25.568Z" title="发表于 2022-01-27 18:43:25">2022-01-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RocketMQ/">RocketMQ</a></span></div><div class="content">1、概述MQ概述限流削峰（请求存在队列中）
异步解耦
数据采集

MQ常见协议JMS
STOMP
AMQP
MQTT
2、RocketMQ基本概念消息、主题、标签、队列、消息标识（消息唯一id：生产者、broker）

系统架构
生产者
消费者
（一个消费者组，消费者消费队列不同）
Name Server（注册中心）：broker管理、路由信息管理
路由注册、路由剔除（心跳包）、路由发现、选择策略：轮询
broker
组成：实体、客户端管理、存储、高可用（集群数据同步）、索引（ID）
集群部署：主备集群
主从、主备

工作流程1、启动server、监听端口
2、Broker与serve长连接
3、创建topic
4、生产者发送消息：和server建立连接，获取路由（topic、broker）。
与broker长连接，向broker发送消息。路由信息每30s缓存在本地。
5、消费者，server连接，获取路由。与broker长连接，消费。
Consumer发送心跳，确认broker存活状态。
Topic的创建模式集群、broker模式
读写队列一般情况数量一样
设计目的：方便topic的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/25/RabbitMQ/" title="RabbitMQ"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220125223250580.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/25/RabbitMQ/" title="RabbitMQ">RabbitMQ</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-25T15:05:01.328Z" title="发表于 2022-01-25 23:05:01">2022-01-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RabbitMQ/">RabbitMQ</a></span></div><div class="content">1、概述什么是MQ消息队列
流量削峰
应用解耦：上游只需发送消息
异步处理：异步处理回调消息
四大核心概念生产者、交换机、队列、消费者
六大核心模式简单、工作队列、发布订阅、路由、主题、发布确认

工作原理Broker
Virtual host
Connection
Channel
Exchange
Queue
Binding

2、核心工作队列轮询分发消息
消息应答：消费者是否处理消息
自动应答、手动应答（批量应答）
消息自动重新入队
rabbitmq持久化：队列持久化、消息持久化
不公平分发
预取值：通道中堆积消息个数
发布确认单个确认发布
批量确认发布
异步确认发布：异步通知——交换机确认收到、未确认收到
并发链路式队列——发消息和监听线程之间传递消息——本质：map
1、发送消息时进记录队列
2、确认回调再删除
未删除的——未确认消息
跳表


Exchange直接(direct), 主题(topic) ,标题(headers) , 扇出(fanout)
无名 exchange
临时队列
bindings
Fanout广播：路由key为空

Direct发送路由key对应队列— ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/24/ActiveMQ/" title="ActiveMQ"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220124223154575.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ActiveMQ"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/24/ActiveMQ/" title="ActiveMQ">ActiveMQ</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-24T14:14:42.140Z" title="发表于 2022-01-24 22:14:42">2022-01-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ActiveMQ/">ActiveMQ</a></span></div><div class="content">1、简介
解耦、异步、削峰
分布式系统
只要消息发送，尽量异步
只要解耦，尽量引入消息中间件
2、编码JMS编码架构

原生API：
生产者：
连接工厂——获取连接——创建会话session
创建目的地（队列、主题）——创建消息生产者
消息生产者发送消息
（1）创建消息
（2）通过生产者发送
关闭资源（倒序：生产者、session、连接）
消费者：
连接工厂——获取连接——创建会话session
创建目的地（队列、主题）——创建消息消费者
消费生产者接收消息——接收消息（一直型、定时型）、消息类型要一致
关闭资源（倒序：消费者、session、连接）
1、receive
2、监听
队列同时监听：轮询
主题：先订阅再有生产消息
3、JMSJavaEE

JMS：java消息服务
消息头
消息体
消息属性
可靠性：持久化、事务、签收、集群
4、Broker5、spring boot整合间隔定投
注解监听
6、传输协议种类
NIO + 多协议
7、消息存储和持久化AMQ
KahaDB：事务日志 + 索引文件
Db.log：存储消息、Db.data：B树索引、Lock：文件锁
LevelDB： ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/24/Spring%20Security/" title="Spring Security"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220124221129878.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Security"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/24/Spring%20Security/" title="Spring Security">Spring Security</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-24T14:00:07.512Z" title="发表于 2022-01-24 22:00:07">2022-01-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Spring-Security/">Spring Security</a></span></div><div class="content">1、基本原理认证
授权

2、web权限查询数据库认证
自定义登录页面
方法注解
注销
原理分析
CSRF
3、微服务权限流程

数据库分表

JWT：JWT 头、内容、签名哈希

4、源码解析Spring Security 采取过滤链实现认证与授权
认证流程
权限访问流程
请求间共享认证信息
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/24/nginx/" title="nginx"><img class="post_bg" src="https://img-blog.csdnimg.cn/20191103213303224.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9hcml0aC5ibG9nLmNzZG4ubmV0,size_16,color_FFFFFF,t_70" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nginx"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/24/nginx/" title="nginx">nginx</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-24T13:49:09.621Z" title="发表于 2022-01-24 21:49:09">2022-01-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/nginx/">nginx</a></span></div><div class="content">1、概念nginx
正向代理
反向代理
负载均衡
动静分离
2、配置高可用集群（主从模式）

高可用集群（双主模式）

3、原理
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/24/zookeeper/" title="zookeeper"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220124214747431.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="zookeeper"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/24/zookeeper/" title="zookeeper">zookeeper</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-24T13:31:15.600Z" title="发表于 2022-01-24 21:31:15">2022-01-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/zookeeper/">zookeeper</a></span></div><div class="content">1、入门概述：工作机制
数据结构：ZNode 树型文件系统
统一命名服务、统一配置管理、统一集群管理、服务器节点动态上下
线、软负载均衡等
2、安装3、集群选举机制：
第一次启动
非第一次启动：任期id——事务id——id
节点类型：
持久、短暂、有序号、无序号
监听器
写数据原理：
发给leader

发给follower

4、案例服务器动态上下线
分布式锁

Curator框架实现分布式锁
5、源码选举机制：第一次、非第一次
分布式一致性：
Paxos算法
ZAB协议：消息广播、崩溃恢复
异常发生——leader选举 + 数据恢复
数据恢复——一个follower所有事务提交之后才变为follower
CAP理论：保证CP
持久化源码

序列化源码

服务端初始化源码-启动脚本
初始化-解析参数
初始化-过期快照删除
初始化-通信初始化
服务端加载数据源码
选举-选举准备
选举-选举执行
Follower 和 Leader 状态同步源码
状态同步细节
Leader启动
Follower启动
客户端启动

选举
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/24/dubbo/" title="dubbo"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220124212904106.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="dubbo"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/24/dubbo/" title="dubbo">dubbo</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-24T13:23:46.178Z" title="发表于 2022-01-24 21:23:46">2022-01-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/">微服务核心</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/dubbo/">dubbo</a></span></div><div class="content">1、概念分布式系统演变
RPC原理

dubbo核心原理
监控中心
2、dubbo配置3、高可用zookeeper
集群负载均衡
hystrix、服务熔断、服务降级
4、原理RPC原理：一次完整的RPC调用流程（同步调用，异步另说）如下： 
1）服务消费方（client）调用以本地调用方式调用服务； 
2）client stub接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体； 
3）client stub找到服务地址，并将消息发送到服务端； 
4）server stub收到消息后进行解码； 
5）server stub根据解码结果调用本地的服务； 
6）本地服务执行并将结果返回给server stub； 
7）server stub将返回结果打包成消息并发送至消费方； 
8）client stub接收到消息，并进行解码； 
9）服务消费方得到最终结果。
RPC框架的目标就是要2~8这些步骤都封装起来，这些细节对用户来说是透明的，不可见的。
netty通信原理BIO
NIO
dubbo原理
框架设计
启动解析、加载配置信息
服务暴露
服务引用
服务调用
</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220209232417.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">gca</div><div class="author-info__description">gca的学习录，欢迎访问！</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/fireonice" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1637872839@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/fireonice.github.io" target="_blank" title="博客"><i class="fab fa-algolia"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">3D 博客，点此进入！<a target="_blank" href="https://fireonice.github.io/fireonice-3D.github.io/"><img src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220211111643538.png"></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/06/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%A0%B8%E5%BF%83-Kubernetes/" title="谷粒商城——云原生核心-Kubernetes"><img src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220306230401741.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒商城——云原生核心-Kubernetes"/></a><div class="content"><a class="title" href="/2022/03/06/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%A0%B8%E5%BF%83-Kubernetes/" title="谷粒商城——云原生核心-Kubernetes">谷粒商城——云原生核心-Kubernetes</a><time datetime="2022-03-06T14:49:41.462Z" title="发表于 2022-03-06 22:49:41">2022-03-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/04/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E9%AB%98%E5%B9%B6%E5%8F%91%EF%BC%88%E7%A7%92%E6%9D%80%EF%BC%89%E7%B3%BB%E7%BB%9F&amp;Sentinel&amp;%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="谷粒商城——高并发（秒杀）系统&amp;Sentinel&amp;链路追踪"><img src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220304230038114.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒商城——高并发（秒杀）系统&amp;Sentinel&amp;链路追踪"/></a><div class="content"><a class="title" href="/2022/03/04/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E9%AB%98%E5%B9%B6%E5%8F%91%EF%BC%88%E7%A7%92%E6%9D%80%EF%BC%89%E7%B3%BB%E7%BB%9F&amp;Sentinel&amp;%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="谷粒商城——高并发（秒杀）系统&amp;Sentinel&amp;链路追踪">谷粒商城——高并发（秒杀）系统&amp;Sentinel&amp;链路追踪</a><time datetime="2022-03-04T14:07:06.689Z" title="发表于 2022-03-04 22:07:06">2022-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/28/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98&amp;RSA%E5%8A%A0%E5%AF%86&amp;%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="谷粒商城——支付宝支付&amp;RSA加密&amp;内网穿透"><img src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220228230726942.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒商城——支付宝支付&amp;RSA加密&amp;内网穿透"/></a><div class="content"><a class="title" href="/2022/02/28/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98&amp;RSA%E5%8A%A0%E5%AF%86&amp;%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="谷粒商城——支付宝支付&amp;RSA加密&amp;内网穿透">谷粒商城——支付宝支付&amp;RSA加密&amp;内网穿透</a><time datetime="2022-02-28T14:59:05.494Z" title="发表于 2022-02-28 22:59:05">2022-02-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/28/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1-%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF+%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="谷粒商城——柔性事务-可靠消息+最终一致性解决方案（异步确保型）"><img src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%B5%81%E7%A8%8B.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒商城——柔性事务-可靠消息+最终一致性解决方案（异步确保型）"/></a><div class="content"><a class="title" href="/2022/02/28/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1-%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF+%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="谷粒商城——柔性事务-可靠消息+最终一致性解决方案（异步确保型）">谷粒商城——柔性事务-可靠消息+最终一致性解决方案（异步确保型）</a><time datetime="2022-02-28T05:57:31.284Z" title="发表于 2022-02-28 13:57:31">2022-02-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/27/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E5%B9%82%E7%AD%89%E6%80%A7&amp;%E5%88%86%E5%B8%83%E5%BC%8F%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1&amp;%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF&amp;%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7/" title="谷粒商城——幂等性&amp;分布式事务&amp;Raft原理"><img src="https://cdn.jsdelivr.net/gh/fireonice/picgo/img/image-20220228081824936.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒商城——幂等性&amp;分布式事务&amp;Raft原理"/></a><div class="content"><a class="title" href="/2022/02/27/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E5%B9%82%E7%AD%89%E6%80%A7&amp;%E5%88%86%E5%B8%83%E5%BC%8F%E6%9F%94%E6%80%A7%E4%BA%8B%E5%8A%A1&amp;%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF&amp;%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7/" title="谷粒商城——幂等性&amp;分布式事务&amp;Raft原理">谷粒商城——幂等性&amp;分布式事务&amp;Raft原理</a><time datetime="2022-02-27T15:25:07.604Z" title="发表于 2022-02-27 23:25:07">2022-02-27</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%A7%E5%93%81/"><span class="card-category-list-name">产品</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83/"><span class="card-category-list-name">微服务核心</span><span class="card-category-list-count">12</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ActiveMQ/" style="font-size: 1.15em; color: rgb(179, 103, 197)">ActiveMQ</a><a href="/tags/Mycat/" style="font-size: 1.15em; color: rgb(77, 33, 164)">Mycat</a><a href="/tags/RabbitMQ/" style="font-size: 1.15em; color: rgb(107, 82, 156)">RabbitMQ</a><a href="/tags/RocketMQ/" style="font-size: 1.15em; color: rgb(34, 192, 87)">RocketMQ</a><a href="/tags/docker/" style="font-size: 1.15em; color: rgb(103, 78, 180)">docker</a><a href="/tags/Spring-Security/" style="font-size: 1.15em; color: rgb(92, 137, 12)">Spring Security</a><a href="/tags/dubbo/" style="font-size: 1.15em; color: rgb(91, 152, 129)">dubbo</a><a href="/tags/SpringCloud-Alibaba/" style="font-size: 1.15em; color: rgb(188, 40, 11)">SpringCloud Alibaba</a><a href="/tags/elasticsearch/" style="font-size: 1.15em; color: rgb(29, 76, 160)">elasticsearch</a><a href="/tags/nginx/" style="font-size: 1.15em; color: rgb(104, 19, 184)">nginx</a><a href="/tags/zookeeper/" style="font-size: 1.15em; color: rgb(24, 82, 101)">zookeeper</a><a href="/tags/redis/" style="font-size: 1.15em; color: rgb(82, 15, 129)">redis</a><a href="/tags/%E4%BA%A7%E5%93%81%E5%BC%80%E5%8F%91/" style="font-size: 1.45em; color: rgb(25, 0, 77)">产品开发</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">12</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">24</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">27.4k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-03-06T15:29:20.065Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By gca</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script><script src="https://cdn.jsdelivr.net/gh/yremp/yremp-js@1.5/sakura.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>